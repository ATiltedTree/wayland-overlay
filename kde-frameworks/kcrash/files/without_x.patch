diff --git a/CMakeLists.txt b/CMakeLists.txt
index 55ac3c3..1904c0d 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -4,6 +4,8 @@ set(KF_VERSION "5.87.0") # handled by release scripts
 set(KF_DEP_VERSION "5.87.0") # handled by release scripts
 project(KCrash VERSION ${KF_VERSION})
 
+option(HAVE_X11 "Use X11" OFF)
+
 include(FeatureSummary)
 find_package(ECM 5.87.0  NO_MODULE)
 set_package_properties(ECM PROPERTIES TYPE REQUIRED DESCRIPTION "Extra CMake Modules." URL "https://commits.kde.org/extra-cmake-modules")
@@ -18,14 +20,11 @@ include(KDEFrameworkCompilerSettings NO_POLICY_SCOPE)
 include(KDECMakeSettings)
 include(KDEGitCommitHooks)
 
-if (UNIX AND NOT APPLE AND NOT ANDROID)
-    find_package(X11)
+if (HAVE_X11 AND UNIX AND NOT APPLE AND NOT ANDROID)
+    find_package(X11 REQUIRED)
     find_package(Qt5 ${REQUIRED_QT_VERSION} CONFIG REQUIRED COMPONENTS X11Extras)
 endif()
 
-set(HAVE_X11 ${X11_FOUND})
-
-
 include(GenerateExportHeader)
 include(ECMSetupVersion)
 include(ECMGenerateHeaders)
